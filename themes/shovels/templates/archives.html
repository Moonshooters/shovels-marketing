{% extends "base.html" %}

{% block content %}
<section class="py-8 md:py-24">
  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <div class="mx-auto">
      <h2 class="text-5xl font-bold leading-tight text-emerald-800">The Shovels Blog</h2>
      <p class="mt-2 text-lg leading-8 text-gray-900 max-w-lg">We write about proptech, climatetech, and entrepreneurship.</p>
    </div>
  </div>
</section>
<!-- categories -->
<section class="mx-auto max-w-7xl px-6 lg:px-8">
  <ul class="flex flex-row">
      <li class="rounded bg-stone-200 font-medium text-gray-900 hover:bg-stone-100 text-xs px-3 py-2 cursor-pointer mr-3">
       <a href="/blog">All</a>
      </li>
    {% for category, articles in categories %}
      <li class="rounded bg-amber-300 font-medium text-gray-900 hover:bg-stone-100 text-xs px-3 py-2 cursor-pointer mr-3">
        <a href="/blog/?category={{category}}">{{ category }}</a>
      </li>
    {% endfor %}
  </ul>
</section>
<!-- article cards -->
<section class="py-8" x-data="filterComponent()">
  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <div class="mt-10 grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-4">
      {% for article in dates %}
      <article class="border-2 border-gray-900" x-show="isMatchingCategory('{{ article.category }}')">
        <img src="{% if article.image %}{{ article.image }}{% else %}/images/blog-card-default.png{% endif %}" alt="">
        <!-- card contents -->
        <div class="p-8">
          <div>
            <a href="#" class="relative z-10 rounded bg-stone-200 font-medium text-gray-900 hover:bg-stone-100 text-xs px-3 py-2">{{ article.category }}</a>
          </div>
          <div class="group relative">
            <h2 class="my-6 text-2xl font-semibold leading-6 text-gray-900 group-hover:text-gray-600">
              <a href="{{ SITEURL }}/{{ article.url }}">
                <span class="absolute inset-0"></span>
                {{ article.title }}
              </a>
            </h2>
          </div>
          <div class="">
            <time datetime="{{ article.date }}" class="text-black text-xs">{{ article.locale_date }}</time>
          </div>
        </div>

      </article>
      {% endfor %}
    </div>
  </div>
</section>
<script type="text/javascript">
  function filterComponent() {
    const urlParams = new URLSearchParams(window.location.search);
    const category = urlParams.get('category') || null;
    return {
      category,
      isMatchingCategory(articleCategory) {
        return !this.category || this.category === articleCategory;
      }
    }
  }
</script>
{% endblock %}